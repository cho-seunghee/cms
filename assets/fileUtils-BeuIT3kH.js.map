{"version":3,"file":"fileUtils-BeuIT3kH.js","sources":["../../src/utils/fileUtils.js"],"sourcesContent":["const fileUtils = {\n  // 상수 정의 (환경 변수에서 가져오거나 디폴트값 사용)\n  _MAX_FILES: parseInt(import.meta.env.VITE_MAX_FILES, 10) || 5, // 최대 파일 수 (기본값 5)\n  _MAX_FILE_SIZE: parseInt(import.meta.env.VITE_MAX_FILE_SIZE, 10) || 50 * 1024 * 1024, // 최대 파일 크기 (기본값 50MB)\n  _ACCEPT: '*', // 기본적으로 모든 파일 허용\n\n  // MAX_FILES getter/setter\n  getMaxFiles() { // 최대 파일 수를 반환\n    return this._MAX_FILES;\n  },\n  setMaxFiles(value) { // 최대 파일 수를 설정\n    if (typeof value === 'number' && value > 0) {\n      this._MAX_FILES = value;\n    } else {\n      console.warn('MAX_FILES는 양수 숫자여야 합니다.');\n    }\n  },\n\n  // MAX_FILE_SIZE getter/setter\n  getMaxFileSize() { // 최대 파일 크기를 반환\n    return this._MAX_FILE_SIZE;\n  },\n  setMaxFileSize(value) { // 최대 파일 크기를 설정\n    if (typeof value === 'number' && value > 0) {\n      this._MAX_FILE_SIZE = value;\n    } else {\n      console.warn('MAX_FILE_SIZE는 양수 숫자여야 합니다.');\n    }\n  },\n\n  // ACCEPT getter/setter\n  getAccept() { // 현재 설정된 파일 허용 타입을 반환 (브라우저 호환성을 위해 정규화)\n    if (this._ACCEPT === 'text/*') {\n      return 'text/plain';\n    }\n    if (this._ACCEPT === 'document/*') {\n      return this.documentExtensions\n        .map(ext => this.mimeTypes[ext])\n        .filter(mime => mime)\n        .join(',');\n    }\n    return this._ACCEPT;\n  },\n    setAccept(value) { // 파일 허용 타입을 설정\n    if (typeof value === 'string' && value.trim()) {\n      const normalizedValue = value.trim().toLowerCase();\n      if (normalizedValue === 'image/*') {\n        this._ACCEPT = this.imageExtensions\n          .map(ext => this.mimeTypes[ext])\n          .filter(mime => mime)\n          .join(',');\n      } else if (normalizedValue === 'video/*') {\n        this._ACCEPT = this.videoExtensions\n          .map(ext => this.mimeTypes[ext])\n          .filter(mime => mime)\n          .join(',');\n      } else if (normalizedValue === 'audio/*') {\n        this._ACCEPT = this.audioExtensions\n          .map(ext => this.mimeTypes[ext])\n          .filter(mime => mime)\n          .join(',');\n      } else if (normalizedValue === 'text/*') {\n        this._ACCEPT = this.textExtensions\n          .map(ext => this.mimeTypes[ext])\n          .filter(mime => mime)\n          .join(',');\n      } else if (normalizedValue === 'document/*') {\n        this._ACCEPT = 'document/*';\n      } else if (normalizedValue === 'excel/*' || normalizedValue === 'excel') { // Excel 전용 설정 추가\n        this._ACCEPT = this.excelExtensions\n          .map(ext => this.mimeTypes[ext])\n          .filter(mime => mime)\n          .join(',');\n      } else if (normalizedValue === '*' || normalizedValue === '*/*') {\n        this._ACCEPT = '*';\n      } else {\n        this._ACCEPT = normalizedValue;\n      }\n    } else if (Array.isArray(value) && value.length > 0) {\n      const mimeTypes = value\n        .map(ext => this.mimeTypes[ext.toLowerCase()])\n        .filter(mime => mime)\n        .join(',');\n      this._ACCEPT = mimeTypes || '*';\n    } else {\n      console.warn('ACCEPT는 유효한 문자열 또는 확장자 배열이어야 합니다.');\n      this._ACCEPT = '*'; // 기본값으로 모든 파일 허용\n    }\n  },\n\n  // 파일이 유효한지 확인 (특정 조건에 따라 Excel 전용 체크 가능)\n  isValidFile(file, excelOnly = false) {\n    const extension = this.getFileExtension(file.fileName || file.name);\n    const mimeType = this.mimeTypes[extension];\n\n    if (this._ACCEPT === '*') {\n      return !excelOnly || this.isExcelFileOnly(file); // Excel 전용 체크 적용\n    }\n\n    const acceptTypes = this._ACCEPT.split(',').map(type => type.trim());\n    if (acceptTypes.includes(mimeType)) {\n      return !excelOnly || this.isExcelFileOnly(file); // Excel 전용 체크 적용\n    }\n\n    if (this._ACCEPT === 'document/*' && this.isDocumentFile(file)) {\n      return !excelOnly || this.isExcelFileOnly(file); // Excel 전용 체크 적용\n    }\n    if (acceptTypes.some(type => type === 'image/*' && this.isImageFile(file))) {\n      return false; // Excel 전용 모드에서는 이미지 불가\n    }\n    if (acceptTypes.some(type => type === 'video/*' && this.isVideoFile(file))) {\n      return false; // Excel 전용 모드에서는 동영상 불가\n    }\n    if (acceptTypes.some(type => type === 'audio/*' && this.isAudioFile(file))) {\n      return false; // Excel 전용 모드에서는 오디오 불가\n    }\n    if (acceptTypes.some(type => type === 'text/plain' && this.isTextFile(file))) {\n      return false; // Excel 전용 모드에서는 텍스트 불가\n    }\n\n    return false;\n  },\n\n  // Excel 파일만 체크\n  isExcelFileOnly(file) {\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.excelExtensions.includes(extension);\n  },\n\n  // MIME 타입 매핑\n  mimeTypes: {\n    jpg: 'image/jpeg',\n    jpeg: 'image/jpeg',\n    png: 'image/png',\n    gif: 'image/gif',\n    svg: 'image/svg+xml',\n    bmp: 'image/bmp',\n    webp: 'image/webp',\n    zip: 'application/zip',\n    rar: 'application/x-rar-compressed',\n    '7z': 'application/x-7z-compressed',\n    tar: 'application/x-tar',\n    gz: 'application/gzip',\n    mp4: 'video/mp4',\n    mpeg: 'video/mpeg',\n    mov: 'video/quicktime',\n    avi: 'video/x-msvideo',\n    wmv: 'video/x-ms-wmv',\n    flv: 'video/x-flv',\n    webm: 'video/webm',\n    mp3: 'audio/mpeg',\n    wav: 'audio/wav',\n    ogg: 'audio/ogg',\n    aac: 'audio/aac',\n    flac: 'audio/flac',\n    pdf: 'application/pdf',\n    doc: 'application/msword',\n    docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    xls: 'application/vnd.ms-excel',\n    xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    ppt: 'application/vnd.ms-powerpoint',\n    pptx: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n    txt: 'text/plain',\n    log: 'text/plain',\n  },\n\n  imageExtensions: ['jpg', 'jpeg', 'png', 'gif', 'svg', 'bmp', 'webp'],\n  zipExtensions: ['zip', 'rar', '7z', 'tar', 'gz'],\n  videoExtensions: ['mp4', 'mpeg', 'mov', 'avi', 'wmv', 'flv', 'webm'],\n  audioExtensions: ['mp3', 'wav', 'ogg', 'aac', 'flac'],\n  textExtensions: ['txt', 'log'],\n  documentExtensions: ['pdf', 'doc', 'docx', 'xls', 'xlsx', 'ppt', 'pptx'],\n  excelExtensions: ['xls', 'xlsx'],\n\n  formatFileSize(bytes) { // 파일 크기를 가독성 있는 단위로 변환\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  },\n\n  getFileExtension(fileName) { // 파일 이름에서 확장자를 추출\n    return fileName.split('.').pop().toLowerCase();\n  },\n\n  isImageFile(file) { // 이미지 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.imageExtensions.includes(extension);\n  },\n\n  isZipFile(file) { // ZIP 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.zipExtensions.includes(extension);\n  },\n\n  isVideoFile(file) { // 동영상 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.videoExtensions.includes(extension);\n  },\n\n  isAudioFile(file) { // 오디오 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.audioExtensions.includes(extension);\n  },\n\n  isTextFile(file) { // 텍스트 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.textExtensions.includes(extension);\n  },\n\n  isDocumentFile(file) { // 문서 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.documentExtensions.includes(extension);\n  },\n\n  isExcelFile(file) { // 엑셀 파일인지 확인\n    const extension = this.getFileExtension(file.fileName || file.name);\n    return this.excelExtensions.includes(extension);\n  },\n\n  getFileIcon(file) { // 파일 타입에 따른 Bootstrap 아이콘 반환\n    const extension = this.getFileExtension(file.fileName || file.name);\n    if (this.imageExtensions.includes(extension)) {\n      return 'bi-image';\n    } else if (this.zipExtensions.includes(extension)) {\n      return 'bi-file-earmark-zip';\n    } else if (this.videoExtensions.includes(extension)) {\n      return 'bi-camera-video';\n    } else if (this.audioExtensions.includes(extension)) {\n      return 'bi-music-note';\n    } else if (extension === 'pdf') {\n      return 'bi-file-earmark-pdf';\n    } else if (['doc', 'docx'].includes(extension)) {\n      return 'bi-file-earmark-word';\n    } else if (['xls', 'xlsx'].includes(extension)) {\n      return 'bi-file-earmark-excel';\n    } else if (['ppt', 'pptx'].includes(extension)) {\n      return 'bi-file-earmark-slides';\n    } else if (this.textExtensions.includes(extension)) {\n      return 'bi-file-earmark-text';\n    } else {\n      return 'bi-file-earmark';\n    }\n  },\n\n  decodeBase64ToText(base64String) { // Base64 문자열을 UTF-8 텍스트로 디코딩\n    try {\n      const decodedData = atob(base64String);\n      return decodeURIComponent(escape(decodedData));\n    } catch (error) {\n      console.error('Error decoding base64 to text:', error);\n      throw new Error('텍스트 파일을 디코딩하는 중 오류가 발생했습니다.');\n    }\n  },\n\n  encodeTextToBase64(text) { // UTF-8 텍스트를 Base64 문자열로 인코딩\n    try {\n      const encodedData = unescape(encodeURIComponent(text));\n      return btoa(encodedData);\n    } catch (error) {\n      console.error('Error encoding text to base64:', error);\n      throw new Error('텍스트를 Base64로 인코딩하는 중 오류가 발생했습니다.');\n    }\n  },\n};\n\nexport default fileUtils;"],"names":["fileUtils","value","ext","mime","normalizedValue","mimeTypes","file","excelOnly","extension","mimeType","acceptTypes","type","bytes","k","sizes","i","fileName","base64String","decodedData","error","text","encodedData"],"mappings":"AAAA,MAAMA,EAAY,CAEhB,WAAY,SAAS,IAAgC,EAAE,GAAK,EAC5D,eAAgB,SAAS,WAAoC,EAAE,GAAK,SACpE,QAAS,IAGT,aAAc,CACZ,OAAO,KAAK,UAAA,EAEd,YAAYC,EAAO,CACb,OAAOA,GAAU,UAAYA,EAAQ,EACvC,KAAK,WAAaA,EAElB,QAAQ,KAAK,yBAAyB,CACxC,EAIF,gBAAiB,CACf,OAAO,KAAK,cAAA,EAEd,eAAeA,EAAO,CAChB,OAAOA,GAAU,UAAYA,EAAQ,EACvC,KAAK,eAAiBA,EAEtB,QAAQ,KAAK,6BAA6B,CAC5C,EAIF,WAAY,CACV,OAAI,KAAK,UAAY,SACZ,aAEL,KAAK,UAAY,aACZ,KAAK,mBACT,IAAIC,GAAO,KAAK,UAAUA,CAAG,CAAC,EAC9B,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EAEN,KAAK,OAAA,EAEZ,UAAUF,EAAO,CACjB,GAAI,OAAOA,GAAU,UAAYA,EAAM,OAAQ,CAC7C,MAAMG,EAAkBH,EAAM,KAAA,EAAO,YAAA,EACjCG,IAAoB,UACtB,KAAK,QAAU,KAAK,gBACjB,OAAW,KAAK,UAAUF,CAAG,CAAC,EAC9B,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EACFC,IAAoB,UAC7B,KAAK,QAAU,KAAK,gBACjB,OAAW,KAAK,UAAUF,CAAG,CAAC,EAC9B,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EACFC,IAAoB,UAC7B,KAAK,QAAU,KAAK,gBACjB,OAAW,KAAK,UAAUF,CAAG,CAAC,EAC9B,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EACFC,IAAoB,SAC7B,KAAK,QAAU,KAAK,eACjB,OAAW,KAAK,UAAUF,CAAG,CAAC,EAC9B,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EACFC,IAAoB,aAC7B,KAAK,QAAU,aACNA,IAAoB,WAAaA,IAAoB,QAC9D,KAAK,QAAU,KAAK,gBACjB,OAAW,KAAK,UAAUF,CAAG,CAAC,EAC9B,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EACFC,IAAoB,KAAOA,IAAoB,MACxD,KAAK,QAAU,IAEf,KAAK,QAAUA,CACjB,SACS,MAAM,QAAQH,CAAK,GAAKA,EAAM,OAAS,EAAG,CACnD,MAAMI,EAAYJ,EACf,IAAIC,GAAO,KAAK,UAAUA,EAAI,YAAA,CAAa,CAAC,EAC5C,OAAOC,GAAQA,CAAI,EACnB,KAAK,GAAG,EACX,KAAK,QAAUE,GAAa,GAAA,MAE5B,QAAQ,KAAK,mCAAmC,EAChD,KAAK,QAAU,GACjB,EAIF,YAAYC,EAAMC,EAAY,GAAO,CACnC,MAAMC,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAC5DG,EAAW,KAAK,UAAUD,CAAS,EAEzC,GAAI,KAAK,UAAY,IACnB,MAAO,CAACD,GAAa,KAAK,gBAAgBD,CAAI,EAGhD,MAAMI,EAAc,KAAK,QAAQ,MAAM,GAAG,EAAE,IAAIC,GAAQA,EAAK,KAAA,CAAM,EACnE,OAAID,EAAY,SAASD,CAAQ,EACxB,CAACF,GAAa,KAAK,gBAAgBD,CAAI,EAG5C,KAAK,UAAY,cAAgB,KAAK,eAAeA,CAAI,EACpD,CAACC,GAAa,KAAK,gBAAgBD,CAAI,GAE5CI,EAAY,KAAKC,GAAQA,IAAS,WAAa,KAAK,YAAYL,CAAI,CAAC,GAGrEI,EAAY,KAAKC,GAAQA,IAAS,WAAa,KAAK,YAAYL,CAAI,CAAC,GAGrEI,EAAY,KAAKC,GAAQA,IAAS,WAAa,KAAK,YAAYL,CAAI,CAAC,GAGrEI,EAAY,KAAKC,GAAQA,IAAS,cAAgB,KAAK,WAAWL,CAAI,CAAC,EAClE,GAGF,EAIT,gBAAgBA,EAAM,CACpB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,gBAAgB,SAASE,CAAS,CAAA,EAIhD,UAAW,CACT,IAAK,aACL,KAAM,aACN,IAAK,YACL,IAAK,YACL,IAAK,gBACL,IAAK,YACL,KAAM,aACN,IAAK,kBACL,IAAK,+BACL,KAAM,8BACN,IAAK,oBACL,GAAI,mBACJ,IAAK,YACL,KAAM,aACN,IAAK,kBACL,IAAK,kBACL,IAAK,iBACL,IAAK,cACL,KAAM,aACN,IAAK,aACL,IAAK,YACL,IAAK,YACL,IAAK,YACL,KAAM,aACN,IAAK,kBACL,IAAK,qBACL,KAAM,0EACN,IAAK,2BACL,KAAM,oEACN,IAAK,gCACL,KAAM,4EACN,IAAK,aACL,IAAK,YAAA,EAGP,gBAAiB,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAM,EACnE,cAAe,CAAC,MAAO,MAAO,KAAM,MAAO,IAAI,EAC/C,gBAAiB,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAM,EACnE,gBAAiB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAM,EACpD,eAAgB,CAAC,MAAO,KAAK,EAC7B,mBAAoB,CAAC,MAAO,MAAO,OAAQ,MAAO,OAAQ,MAAO,MAAM,EACvE,gBAAiB,CAAC,MAAO,MAAM,EAE/B,eAAeI,EAAO,CACpB,GAAIA,IAAU,EAAG,MAAO,UACxB,MAAMC,EAAI,KACJC,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,IAAI,EACxCC,EAAI,KAAK,MAAM,KAAK,IAAIH,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAClD,OAAO,YAAYD,EAAQ,KAAK,IAAIC,EAAGE,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMD,EAAMC,CAAC,CAAA,EAGxE,iBAAiBC,EAAU,CACzB,OAAOA,EAAS,MAAM,GAAG,EAAE,IAAA,EAAM,YAAA,CAAY,EAG/C,YAAYV,EAAM,CAChB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,gBAAgB,SAASE,CAAS,CAAA,EAGhD,UAAUF,EAAM,CACd,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,cAAc,SAASE,CAAS,CAAA,EAG9C,YAAYF,EAAM,CAChB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,gBAAgB,SAASE,CAAS,CAAA,EAGhD,YAAYF,EAAM,CAChB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,gBAAgB,SAASE,CAAS,CAAA,EAGhD,WAAWF,EAAM,CACf,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,eAAe,SAASE,CAAS,CAAA,EAG/C,eAAeF,EAAM,CACnB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,mBAAmB,SAASE,CAAS,CAAA,EAGnD,YAAYF,EAAM,CAChB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAO,KAAK,gBAAgB,SAASE,CAAS,CAAA,EAGhD,YAAYF,EAAM,CAChB,MAAME,EAAY,KAAK,iBAAiBF,EAAK,UAAYA,EAAK,IAAI,EAClE,OAAI,KAAK,gBAAgB,SAASE,CAAS,EAClC,WACE,KAAK,cAAc,SAASA,CAAS,EACvC,sBACE,KAAK,gBAAgB,SAASA,CAAS,EACzC,kBACE,KAAK,gBAAgB,SAASA,CAAS,EACzC,gBACEA,IAAc,MAChB,sBACE,CAAC,MAAO,MAAM,EAAE,SAASA,CAAS,EACpC,uBACE,CAAC,MAAO,MAAM,EAAE,SAASA,CAAS,EACpC,wBACE,CAAC,MAAO,MAAM,EAAE,SAASA,CAAS,EACpC,yBACE,KAAK,eAAe,SAASA,CAAS,EACxC,uBAEA,iBACT,EAGF,mBAAmBS,EAAc,CAC/B,GAAI,CACF,MAAMC,EAAc,KAAKD,CAAY,EACrC,OAAO,mBAAmB,OAAOC,CAAW,CAAC,CAAA,OACtCC,EAAO,CACd,cAAQ,MAAM,iCAAkCA,CAAK,EAC/C,IAAI,MAAM,6BAA6B,CAAA,CAC/C,EAGF,mBAAmBC,EAAM,CACvB,GAAI,CACF,MAAMC,EAAc,SAAS,mBAAmBD,CAAI,CAAC,EACrD,OAAO,KAAKC,CAAW,CAAA,OAChBF,EAAO,CACd,cAAQ,MAAM,iCAAkCA,CAAK,EAC/C,IAAI,MAAM,kCAAkC,CAAA,CACpD,CAEJ"}