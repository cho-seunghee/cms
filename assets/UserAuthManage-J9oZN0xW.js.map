{"version":3,"file":"UserAuthManage-J9oZN0xW.js","sources":["../../src/pages/oper/UserAuthManage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport useStore from \"../../store/store\";\nimport { hasPermission } from \"../../utils/authUtils\";\nimport MainSearch from \"../../components/main/MainSearch\";\nimport TableSearch from \"../../components/table/TableSearch\";\nimport { createTable } from \"../../utils/tableConfig\";\nimport { initialFilters } from \"../../utils/tableEvent\";\nimport { handleDownloadExcel } from \"../../utils/tableExcel\";\nimport styles from \"../../components/table/TableSearch.module.css\";\nimport CommonPopup from \"../../components/popup/CommonPopup\";\nimport { fetchData } from \"../../utils/dataUtils\";\nimport { errorMsgPopup } from \"../../utils/errorMsgPopup\";\nimport { msgPopup } from \"../../utils/msgPopup\";\n\nconst getFieldOptions = (fieldId) => {\n  const optionsMap = {\n    GU: [\n      { value: \"ALL\", label: \"전체\" },\n      { value: \"EMPNO\", label: \"사원번호\" },\n      { value: \"EMPNM\", label: \"이름\" },\n      { value: \"ORGCD\", label: \"조직코드\" },\n      { value: \"ORGNM\", label: \"조직명\" },\n      { value: \"COMPANYCD\", label: \"회사코드\" },\n      { value: \"COMPANYNM\", label: \"회사명\" },\n    ],\n  };\n  return optionsMap[fieldId] || [];\n};\n\nconst UserAuthManage = () => {\n  const { user } = useStore();\n  const tableRef = useRef(null);\n  const tableInstance = useRef(null);\n  const isInitialRender = useRef(true);\n\n  const searchConfig = { areas: [\n    { type: 'search', fields: [\n      { id: 'GU', type: 'select', row: 1, label: '구분', labelVisible: true, options: getFieldOptions('GU'), width: '150px', height: '30px', backgroundColor: '#ffffff', color: '#000000', enabled: true },\n      { id: 'searchText', type: 'text', row: 1, label: '', labelVisible: false, placeholder: '검색값을 입력하세요', maxLength: 100, width: '200px', height: '30px', backgroundColor: '#ffffff', color: '#000000', enabled: true },\n    ]},\n    { type: 'buttons', fields: [\n      { id: 'searchBtn', type: 'button', row: 1, label: '검색', eventType: 'search', width: '80px', height: '30px', backgroundColor: '#00c4b4', color: '#ffffff', enabled: true },\n    ]},\n  ]};\n\n  const filterTableFields = [\n    { id: \"filterSelect\", label: \"\", type: \"select\", options: [{ value: \"\", label: \"선택\" }, { value: \"EMPNO\", label: \"사원번호\" }, { value: \"EMPNM\", label: \"이름\" }, { value: \"ORGCD\", label: \"조직코드\" }, { value: \"ORGNM\", label: \"조직명\" }, { value: \"COMPANYCD\", label: \"회사코드\" }, { value: \"COMPANYNM\", label: \"회사명\" }, { value: \"AUTHID\", label: \"권한ID\" }, { value: \"AUTHNM\", label: \"권한명\" }], width: \"auto\" },\n    { id: \"filterText\", label: \"\", type: \"text\", placeholder: \"검색값을 입력하세요\", width: \"200px\" },\n  ];\n\n  const [filters, setFilters] = useState(initialFilters(searchConfig.areas.find((area) => area.type === 'search').fields));\n  const [tableFilters, setTableFilters] = useState(initialFilters(filterTableFields));\n  const [data, setData] = useState([]);\n  const [authList, setAuthList] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [tableStatus, setTableStatus] = useState(\"initializing\");\n  const [showAuthPopup, setShowAuthPopup] = useState(false);\n  const [selectedEmpNo, setSelectedEmpNo] = useState(null);\n  const [newAuth, setNewAuth] = useState({ AUTHID: \"\", AUTHNM: \"\" });\n  const [rowCount, setRowCount] = useState(0);\n  const [isSearched, setIsSearched] = useState(false);\n\n  useEffect(() => {\n    if (!user || !hasPermission(user.auth, \"userAuthManage\")) window.location.href = \"/\";\n  }, [user]);\n\n  useEffect(() => {\n    const loadAuthList = async () => {\n      setLoading(true);\n      try {\n        const params = { pGUBUN: \"AUTHINFO\", pSEARCH: \"\", pDEBUG: \"F\" };\n        const response = await fetchData(\"oper/usermng/list\", params);\n        if (!response.success) {\n          errorMsgPopup(response.message || \"권한 데이터를 가져오는 중 오류가 발생했습니다.\");\n          setAuthList([]);\n          return;\n        }\n        if (response.errMsg !== \"\") {\n          errorMsgPopup(response.errMsg);\n          setAuthList([]);\n          return;\n        }\n        setAuthList(Array.isArray(response.data) ? response.data : []);\n      } catch (err) {\n        errorMsgPopup(err.response?.data?.message || \"권한 데이터를 가져오는 중 오류가 발생했습니다.\");\n        setAuthList([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadAuthList();\n  }, []);\n\n  useEffect(() => {\n    const initializeTable = async () => {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n      if (!tableRef.current) {\n        console.warn(\"테이블 컨테이너가 준비되지 않았습니다.\");\n        return;\n      }\n      try {\n        tableInstance.current = createTable(tableRef.current, [\n          { frozen: true, headerHozAlign: \"center\", hozAlign: \"center\", title: \"작업대상\", field: \"applyTarget\", sorter: \"string\", width: 100, formatter: (cell) => {\n            const rowData = cell.getRow().getData();\n            let label = rowData.isChanged === \"Y\" ? \"변경\" : \"\";\n            if (!label) return \"\";\n            const div = document.createElement(\"div\");\n            div.style.display = \"flex\"; div.style.alignItems = \"center\"; div.style.justifyContent = \"center\"; div.style.gap = \"5px\";\n            const checkbox = document.createElement(\"input\"); checkbox.type = \"checkbox\"; checkbox.checked = rowData.isChanged === \"Y\";\n            checkbox.onclick = () => {\n              setTimeout(() => {\n                setData((prevData) => prevData.map((row) => row.EMPNO === rowData.EMPNO ? { ...row, isChanged: checkbox.checked ? \"Y\" : \"N\" } : row));\n              }, 0);\n            };\n            const span = document.createElement(\"span\"); span.innerText = label;\n            div.appendChild(checkbox); div.appendChild(span);\n            return div;\n          }},\n          { headerHozAlign: \"center\", hozAlign: \"center\", title: \"사원번호\", field: \"EMPNO\", sorter: \"string\", width: 100, editable: false },\n          { headerHozAlign: \"center\", hozAlign: \"left\", title: \"이름\", field: \"EMPNM\", sorter: \"string\", width: 100, editable: false },\n          { headerHozAlign: \"center\", hozAlign: \"left\", title: \"조직코드\", field: \"ORGCD\", sorter: \"string\", width: 100, editable: false },\n          { headerHozAlign: \"center\", hozAlign: \"left\", title: \"조직명\", field: \"ORGNM\", sorter: \"string\", width: 150, editable: false },\n          { headerHozAlign: \"center\", hozAlign: \"left\", title: \"회사코드\", field: \"COMPANYCD\", sorter: \"string\", width: 100, editable: false },\n          { headerHozAlign: \"center\", hozAlign: \"left\", title: \"회사명\", field: \"COMPANYNM\", sorter: \"string\", width: 150, editable: false },\n          { headerHozAlign: \"center\", hozAlign: \"center\", title: \"권한ID\", field: \"AUTHID\", sorter: \"string\", width: 100, editable: false, cellClick: (e, cell) => { setSelectedEmpNo(cell.getRow().getData().EMPNO); setShowAuthPopup(true); }, cellStyle: { backgroundColor: \"#d3d3d3\" } },\n          { headerHozAlign: \"center\", hozAlign: \"left\", title: \"권한명\", field: \"AUTHNM\", sorter: \"string\", width: 150, editable: false, cellClick: (e, cell) => { setSelectedEmpNo(cell.getRow().getData().EMPNO); setShowAuthPopup(true); }, cellStyle: { backgroundColor: \"#d3d3d3\" } },\n        ], [], {\n          editable: false, \n          //headerSort: false, // defaultOptions의 headerSort: true를 false로 재정의\n          //responsiveLayout: true로, // defaultOptions의 responsiveLayout: false를 true로 재정의\n          rowFormatter: (row) => {\n            const data = row.getData();\n            const el = row.getElement();\n            el.classList.remove(styles.editedRow);\n            if (data.isChanged === \"Y\") el.classList.add(styles.editedRow);\n          },\n        });\n        if (!tableInstance.current) throw new Error(\"createTable returned undefined or null\");\n        setTableStatus(\"ready\");\n      } catch (err) {\n        setTableStatus(\"error\");\n        console.error(\"Table initialization failed:\", err.message);\n      }\n    };\n    initializeTable();\n    return () => {\n      if (tableInstance.current) {\n        tableInstance.current.destroy();\n        tableInstance.current = null;\n        setTableStatus(\"initializing\");\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isInitialRender.current) { isInitialRender.current = false; return; }\n    const table = tableInstance.current;\n    if (!table || tableStatus !== \"ready\" || loading) return;\n    if (table.rowManager?.renderer) {\n      table.setData(data);\n      if (isSearched && data.length === 0 && !loading) {\n        tableInstance.current.alert(\"검색 결과 없음\", \"info\");\n      } else {\n        tableInstance.current.clearAlert();\n        const rows = tableInstance.current.getDataCount();\n        setRowCount(rows);\n      }\n    }\n  }, [data, loading, tableStatus, isSearched]);\n\n  useEffect(() => {\n    if (!tableInstance.current || tableStatus !== \"ready\" || loading) return;\n    const { filterSelect, filterText } = tableFilters;\n    if (filterText && filterSelect) {\n      tableInstance.current.setFilter(filterSelect, \"like\", filterText);\n    } else if (filterText) {\n      if (filterText !== \"\") {\n        tableInstance.current.setFilter([\n          { field: \"EMPNO\", type: \"like\", value: filterText },\n          { field: \"EMPNM\", type: \"like\", value: filterText },\n          { field: \"ORGCD\", type: \"like\", value: filterText },\n          { field: \"ORGNM\", type: \"like\", value: filterText },\n          { field: \"COMPANYCD\", type: \"like\", value: filterText },\n          { field: \"COMPANYNM\", type: \"like\", value: filterText },\n          { field: \"AUTHID\", type: \"like\", value: filterText },\n          { field: \"AUTHNM\", type: \"like\", value: filterText },\n        ], \"or\");\n      } else {\n        tableInstance.current.clearFilter();\n      }\n    } else {\n      tableInstance.current.clearFilter();\n    }\n  }, [tableFilters, tableStatus, loading]);\n\n  const handleDynamicEvent = (eventType) => { if (eventType === 'search') handleSearch(); };\n\n  const handleSearch = async () => {\n    setLoading(true);\n    setIsSearched(true);\n    try {\n      const params = { pGUBUN: filters.GU || \"ALL\", pSEARCH: filters.searchText || \"\", pDEBUG: \"F\" };\n      const response = await fetchData(\"oper/usermng/list\", params);\n      if (!response.success) {\n        errorMsgPopup(response.message || \"사용자 데이터를 가져오는 중 오류가 발생했습니다.\");\n        setData([]);\n        return;\n      }\n      if (response.errMsg !== \"\") {\n        setData([]);\n        return;\n      }\n      const responseData = Array.isArray(response.data) ? response.data : [];\n      setData(responseData.map(row => ({ ...row, isChanged: \"N\" })));\n    } catch (err) {\n      errorMsgPopup(err.response?.data?.message || \"사용자 데이터를 가져오는 중 오류가 발생했습니다.\");\n      setData([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAuthConfirm = () => {\n    if (!selectedEmpNo) return;\n    const newAuthId = newAuth.AUTHID;\n    setData((prevData) => prevData.map((row) => {\n      if (row.EMPNO === selectedEmpNo) {\n        const auth = authList.find((a) => a.AUTHID === newAuthId);\n        return { ...row, AUTHID: newAuthId, AUTHNM: auth ? auth.AUTHNM : \"\", isChanged: row.isChanged === \"N\" ? \"Y\" : row.isChanged };\n      }\n      return row;\n    }));\n    if (tableInstance.current) tableInstance.current.redraw();\n    setShowAuthPopup(false);\n    setSelectedEmpNo(null);\n    setNewAuth({ AUTHID: \"\", AUTHNM: \"\" });\n  };\n\n  const handleAuthCancel = () => {\n    setShowAuthPopup(false);\n    setSelectedEmpNo(null);\n    setNewAuth({ AUTHID: \"\", AUTHNM: \"\" });\n  };\n\n  const handleSave = async () => {\n    const changedRows = data.filter((row) => row.isChanged === \"Y\");\n    if (changedRows.length === 0) {\n      errorMsgPopup(\"변경된 데이터가 없습니다.\");\n      return;\n    }\n    setLoading(true);\n    try {\n      const promises = changedRows.map(async (row) => {\n        const params = { pGUBUN: \"I\", pEMPNO: row.EMPNO, pAUTHID: row.AUTHID };\n        try {\n          const response = await fetchData(\"oper/usermng/save\", params);\n          if (!response.success) throw new Error(response.message || `Failed to update user ${row.EMPNO}`);\n          return { ...row, success: true };\n        } catch (error) {\n          console.error(`Error processing update for EMPNO: ${row.EMPNO}`, error);\n          return { ...row, error: error.message };\n        }\n      });\n      const results = await Promise.all(promises);\n      const errors = results.filter((result) => result?.error);\n      if (errors.length > 0) {\n        errorMsgPopup(`일부 작업이 실패했습니다: ${errors.map((e) => e.error).join(\", \")}`);\n      } else {\n        msgPopup(\"모든 변경사항이 성공적으로 저장되었습니다.\");\n        setData((prevData) => prevData.map((row) => ({ ...row, isChanged: \"N\" })));\n      }\n    } catch (err) {\n      errorMsgPopup(err.message || \"저장 중 오류가 발생했습니다.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <MainSearch config={searchConfig} filters={filters} setFilters={setFilters} onEvent={handleDynamicEvent} />\n      <TableSearch filterFields={filterTableFields} filters={tableFilters} setFilters={setTableFilters} rowCount={rowCount} onDownloadExcel={() => handleDownloadExcel(tableInstance.current, tableStatus, \"사용자권한관리.xlsx\")} buttonStyles={styles}>\n        <div className={styles.btnGroupCustom}>\n          <button className={`${styles.btn} text-bg-success`} onClick={handleSave}>저장</button>\n        </div>\n      </TableSearch>\n      <div className={styles.tableWrapper}>\n        {tableStatus === \"initializing\" && <div>초기화 중...</div>}\n        {loading && <div>로딩 중...</div>}\n        <div ref={tableRef} className={styles.tableSection} style={{ visibility: loading || tableStatus !== \"ready\" ? \"hidden\" : \"visible\" }} />\n      </div>\n      <CommonPopup show={showAuthPopup} onHide={handleAuthCancel} onConfirm={handleAuthConfirm} title=\"권한 선택\">\n        <div className=\"mb-3\">\n          <label htmlFor=\"authIdSelect\" className=\"form-label\">권한</label>\n          <select className={`form-select ${styles.formSelect}`} id=\"authIdSelect\" value={newAuth.AUTHID} onChange={(e) => {\n            const auth = authList.find((a) => a.AUTHID === e.target.value);\n            setNewAuth({ AUTHID: e.target.value, AUTHNM: auth ? auth.AUTHNM : \"\" });\n          }}>\n            <option value=\"\">선택하세요</option>\n            {authList.map((auth) => (\n              <option key={auth.AUTHID} value={auth.AUTHID}>{auth.AUTHNM}</option>\n            ))}\n          </select>\n        </div>\n      </CommonPopup>\n    </div>\n  );\n};\n\nexport default UserAuthManage;"],"names":["getFieldOptions","fieldId","UserAuthManage","user","useStore","tableRef","useRef","tableInstance","isInitialRender","searchConfig","filterTableFields","filters","setFilters","useState","initialFilters","area","tableFilters","setTableFilters","data","setData","authList","setAuthList","loading","setLoading","tableStatus","setTableStatus","showAuthPopup","setShowAuthPopup","selectedEmpNo","setSelectedEmpNo","newAuth","setNewAuth","rowCount","setRowCount","isSearched","setIsSearched","useEffect","hasPermission","response","fetchData","errorMsgPopup","err","_b","_a","resolve","createTable","cell","rowData","label","div","checkbox","prevData","row","span","el","styles","table","rows","filterSelect","filterText","handleDynamicEvent","eventType","handleSearch","params","responseData","handleAuthConfirm","newAuthId","auth","a","handleAuthCancel","handleSave","changedRows","promises","error","errors","result","e","msgPopup","jsxs","jsx","MainSearch","TableSearch","handleDownloadExcel","CommonPopup"],"mappings":"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"}