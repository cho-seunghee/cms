import{r as l,u as C,j as e,f as w,e as E}from"./index-CDzJiYq6.js";import{m as D}from"./msgPopup-vJapftwn.js";import{s}from"./Join.module-BsAA2Jbn.js";const S=({show:i,onHide:m,initialEmpNo:d,isEditable:h})=>{const[o,x]=l.useState(d||""),[c,f]=l.useState(""),[r,N]=l.useState(""),[u,b]=l.useState(""),[j,t]=l.useState(""),P=C();l.useEffect(()=>{i&&(x(d||""),f(""),N(""),b(""),t(""))},[i,d]);const k=()=>{if(!o||!c||!r||!u)return"필수 입력 항목을 모두 채워주세요.";const a=E.validateVarcharLength(o,20,"아이디");return a.valid?r.length<6?"새 비밀번호는 최소 6자 이상이어야 합니다.":r!==u?"새 비밀번호와 확인 비밀번호가 일치하지 않습니다.":c===r?"현재 비밀번호와 새 비밀번호가 동일할 수 없습니다.":"":a.error},y=async a=>{a.preventDefault(),t("");const g=k();if(g){t(g);return}try{const v=await w("auth/password/list",{pEMPNO:o,pEMPPWD:c,pDEBUG:"F"});if(!v.success||!v.data){t("입력한 비밀번호와 현재 비밀번호가 다릅니다.");return}const n=await w("auth/password/save",{pGUBUN:"U",pEMPNO:o,pEMPPWD:r});if(n.success)n.errMsg!==""?t(n.errMsg):(D("비밀번호가 성공적으로 변경되었습니다."),P("/login"),m());else throw new Error(n.errMsg||"비밀번호 변경에 실패했습니다.")}catch(p){console.error("Password change error:",p.message),t(p.message||"비밀번호 변경 중 오류가 발생했습니다. 다시 시도해주세요.")}};return i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.overlay,onClick:m}),e.jsx("div",{className:`${s.modal} show d-block`,tabIndex:"-1",children:e.jsx("div",{className:`${s.modalDialog} modal-dialog-centered`,children:e.jsxs("div",{className:`${s.modalContent} modal-content`,children:[e.jsxs("div",{className:`${s.modalHeader} modal-header`,children:[e.jsx("h5",{className:`${s.modalTitle} modal-title`,children:"비밀번호 변경"}),e.jsx("button",{type:"button",className:`${s.btnClose} btn-close`,onClick:m})]}),e.jsx("div",{className:`${s.modalBody} modal-body`,children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"empNo",className:"form-label",children:[e.jsx("i",{className:"bi bi-person me-2"}),"아이디 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empNo",value:o,onChange:a=>h&&x(a.target.value),disabled:!h,placeholder:"아이디를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"currentPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock me-2"}),"현재 비밀번호 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"currentPwd",value:c,onChange:a=>f(a.target.value),required:!0,placeholder:"현재 비밀번호를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"newPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock-fill me-2"}),"새 비밀번호 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"newPwd",value:r,onChange:a=>N(a.target.value),required:!0,placeholder:"새 비밀번호를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"confirmPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock-fill me-2"}),"비밀번호 확인 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"confirmPwd",value:u,onChange:a=>b(a.target.value),required:!0,placeholder:"새 비밀번호를 입력하세요"})]})]}),e.jsxs("button",{type:"submit",className:`${s.btn} w-100 mt-3`,children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"변경"]}),j&&e.jsx("p",{className:"text-danger text-center mt-2",children:j})]})})]})})})]}):null};export{S as default};
//# sourceMappingURL=PasswordChange-KWAqVqUv.js.map
