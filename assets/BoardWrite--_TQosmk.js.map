{"version":3,"file":"BoardWrite--_TQosmk.js","sources":["../../src/pages/main/BoardWrite.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { fetchData, fetchFileUpload } from \"../../utils/dataUtils\";\nimport useStore from '../../store/store';\nimport { hasPermission } from '../../utils/authUtils';\nimport { errorMsgPopup } from \"../../utils/errorMsgPopup\";\nimport { msgPopup } from \"../../utils/msgPopup\";\nimport styles from './Board.module.css';\nimport fileUtils from '../../utils/fileUtils';\n\nconst BoardWrite = () => {\n  const { state } = useLocation();\n  const navigate = useNavigate();\n  const { user } = useStore();\n  const isEdit = !!state?.notice;\n  const existingFiles = state?.files || [];\n\n  useEffect(() => {\n    fileUtils.setAccept('*');\n    return () => {\n      fileUtils.getAccept();\n    };\n  }, []);\n\n  const initialExistingFilesState = existingFiles.map(file => ({\n    ...file,\n    size: file.fileSize || 0,\n    isValid: fileUtils.isValidFile(file),\n  }));\n  const initialFileInputs = initialExistingFilesState.length >= fileUtils.getMaxFiles() ? [] : [{ id: Date.now() }];\n  const [title, setTitle] = useState(state?.notice?.title || '');\n  const [content, setContent] = useState(state?.notice?.content || '');\n  const [fileInputs, setFileInputs] = useState(initialFileInputs);\n  const [files, setFiles] = useState(new Array(initialFileInputs.length).fill(null));\n  const [existingFilesState, setExistingFilesState] = useState(initialExistingFilesState);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!user || !hasPermission(user.auth, 'mainBoard')) {\n      navigate('/');\n      return;\n    }\n  }, [user, navigate]);\n\n  const handleAddFileInput = () => {\n    const totalFiles = existingFilesState.length + fileInputs.length;\n    if (totalFiles < fileUtils.getMaxFiles()) {\n      setFileInputs([...fileInputs, { id: Date.now() }]);\n      setFiles([...files, null]);\n    }\n  };\n\n  const handleRemoveFileInput = (id) => {\n    const index = fileInputs.findIndex(input => input.id === id);\n    if (index === -1) return;\n\n    if (fileInputs.length > 1) {\n      const newFileInputs = fileInputs.filter(input => input.id !== id);\n      const newFiles = files.filter((_, i) => i !== index);\n      setFileInputs(newFileInputs);\n      setFiles(newFiles);\n      return;\n    }\n\n    setFileInputs([{ id: Date.now() + 1 }]);\n    setFiles([null]);\n  };\n\n  const handleRemoveExistingFile = async (file) => {\n    if (!window.confirm('파일을 삭제하시겠습니까?')) return;\n\n    if (!isEdit || !state?.notice?.id) {\n      errorMsgPopup(\"공지사항 ID가 존재하지 않습니다. 수정 모드에서만 파일 삭제가 가능합니다.\");\n      return;\n    }\n\n    try {\n      const payload = {\n        gubun: 'D',\n        fileId: String(file.fileId),\n        noticeId: String(state.notice.id)\n      };\n\n      const deleteResponse = await fetchData(\"notice/filedelete\", payload);\n\n      if (deleteResponse.errCd !== '00') {\n        throw new Error(deleteResponse.errMsg || \"파일 삭제 실패\");\n      }\n\n      setExistingFilesState(existingFilesState.filter(f => f.fileId !== file.fileId));\n\n      const totalFiles = existingFilesState.length - 1 + fileInputs.length;\n      if (totalFiles < fileUtils.getMaxFiles() && fileInputs.length === 0) {\n        setFileInputs([{ id: Date.now() }]);\n        setFiles([null]);\n      }\n    } catch (error) {\n      console.error('Error deleting file:', error);\n      errorMsgPopup(error.message || \"파일 삭제 중 오류가 발생했습니다.\");\n    }\n  };\n\n  const handleFileChange = (id, e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile) {\n      if (selectedFile.size > fileUtils.getMaxFileSize()) {\n        errorMsgPopup(`파일 크기는 ${fileUtils.formatFileSize(fileUtils.getMaxFileSize())}를 초과할 수 없습니다.`);\n        return;\n      }\n      if (!fileUtils.isValidFile(selectedFile)) {\n        errorMsgPopup('문서 파일(pdf, doc, docx, xls, xlsx, ppt, pptx)만 업로드 가능합니다.');\n        return;\n      }\n      const index = fileInputs.findIndex(input => input.id === id);\n      if (index === -1) return;\n\n      const newFiles = [...files];\n      newFiles[index] = selectedFile;\n      setFiles(newFiles);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const originalTitle = state?.notice?.title || '';\n    const originalContent = state?.notice?.content || '';\n    const hasTitleChanged = title !== originalTitle;\n    const hasContentChanged = content !== originalContent;\n\n    if ((!isEdit && (!title || !content)) || (isEdit && hasTitleChanged && !title) || (isEdit && hasContentChanged && !content)) {\n      errorMsgPopup(\"제목과 내용을 입력해주세요.\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const gubun = isEdit ? 'U' : 'I';\n      const noticeId = isEdit ? String(state.notice.id) : '0';\n      const payload = {\n        gubun,\n        noticeId,\n        title,\n        content,\n      };\n\n      const saveResponse = await fetchData(\"notice/save\", payload);\n\n      if (saveResponse.errCd !== '00') {\n        throw new Error(saveResponse.errMsg || \"공지사항 저장 실패\");\n      }\n\n      const updatedNoticeId = isEdit ? noticeId : saveResponse.data?.noticeId;\n\n      const validFiles = files.filter(file => file != null);\n      if (validFiles.length > 0) {\n        const formData = new FormData();\n        formData.append(\"gubun\", \"I\");\n        formData.append(\"fileId\", \"\");\n        formData.append(\"noticeId\", updatedNoticeId);\n\n        validFiles.forEach((file) => {\n          formData.append(\"files\", file);\n        });\n\n        const uploadResponse = await fetchFileUpload(\"notice/filesave\", formData);\n\n        if (uploadResponse.errCd !== '00') {\n          throw new Error(uploadResponse.errMsg || \"파일 업로드 실패\");\n        }\n      }\n\n      msgPopup(isEdit ? \"공지사항이 성공적으로 변경되었습니다.\" : \"공지사항이 성공적으로 등록되었습니다.\");\n      navigate('/main');\n    } catch (error) {\n      console.error(\"공지사항 저장 실패:\", {\n        message: error.message,\n        response: error.response ? {\n          status: error.response.status,\n          data: error.response.data,\n          headers: error.response.headers\n        } : 'No response received'\n      });\n\n      errorMsgPopup(error.message || \"공지사항 저장 중 오류가 발생했습니다.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!window.confirm('정말 삭제하시겠습니까?')) return;\n\n    setLoading(true);\n    try {\n      const noticeId = String(state.notice.id);\n      const payload = {\n        gubun: 'D',\n        noticeId,\n        title: title || '',\n        content: content || '',\n      };\n\n      const deleteResponse = await fetchData(\"notice/save\", payload);\n      if (deleteResponse.errCd !== '00') {\n        throw new Error(deleteResponse.errMsg || \"공지사항 삭제 실패\");\n      }\n\n      msgPopup(\"공지사항이 성공적으로 삭제되었습니다.\");\n      navigate('/main');\n    } catch (error) {\n      console.error(\"공지사항 삭제 실패:\", error);\n\n      errorMsgPopup(error.message || \"공지사항 삭제 중 오류가 발생했습니다.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container bg-body\">\n      <h2 className={`text-primary text-dark fs-5 mb-4 pt-3 ${styles.boardTitle}`}>\n        {isEdit ? '공지 변경' : '공지 등록'}\n      </h2>\n      <div className={styles.boardTitleLine}></div>\n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">제목</label>\n          <input\n            className={`form-control bg-light-subtle ${styles.formControl}`}\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            placeholder=\"제목을 입력하세요\"\n            required\n          />\n        </div>\n        <div className=\"mb-3\">\n          <label className=\"form-label\">내용</label>\n          <textarea\n            className={`form-control bg-light-subtle ${styles.formControl}`}\n            rows=\"5\"\n            value={content}\n            onChange={(e) => setContent(e.target.value)}\n            placeholder=\"내용을 입력하세요\"\n            required\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"form-label\">\n            첨부파일 <span className=\"text-muted\">(최대 {fileUtils.getMaxFiles()}개까지만 첨부 가능하며, {fileUtils.formatFileSize(fileUtils.getMaxFileSize())}까지만 가능합니다. 문서 파일만 업로드 가능.)</span>\n          </label>\n          {existingFilesState.length > 0 && (\n            <div className=\"mb-3\">\n              <h6>기존 첨부파일:</h6>\n              {existingFilesState.map((file) => (\n                <div key={file.fileId} className=\"d-flex align-items-center mb-2\">\n                  <span className=\"me-2\">\n                    {file.fileName} ({fileUtils.formatFileSize(file.size)})\n                    {!file.isValid && <span className=\"text-danger ms-2\">(문서 파일이 아님)</span>}\n                  </span>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-outline-danger btn-sm\"\n                    onClick={() => handleRemoveExistingFile(file)}\n                  >\n                    -\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n          {fileInputs && fileInputs.length > 0 ? (\n            fileInputs.map((input, index) => (\n              <div key={input.id} className=\"d-flex align-items-center mb-2\">\n                <input\n                  type=\"file\"\n                  className={`form-control bg-light-subtle ${styles.formControl} me-2`}\n                  onChange={(e) => handleFileChange(input.id, e)}\n                  accept={fileUtils.getAccept()}\n                />\n                <button\n                  type=\"button\"\n                  className=\"btn btn-outline-danger me-2\"\n                  onClick={() => handleRemoveFileInput(input.id)}\n                >\n                  -\n                </button>\n                {index === fileInputs.length - 1 && (\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-outline-primary\"\n                    onClick={handleAddFileInput}\n                    disabled={existingFilesState.length + fileInputs.length >= fileUtils.getMaxFiles()}\n                  >\n                    +\n                  </button>\n                )}\n              </div>\n            ))\n          ) : (\n            <div></div>\n          )}\n          {files.some(file => file != null) && (\n            <div className=\"mt-3\">\n              <h6>선택된 파일:</h6>\n              <ul>\n                {files.map((file, index) => (\n                  file && (\n                    <li key={index}>\n                      {file.name} ({fileUtils.formatFileSize(file.size)})\n                    </li>\n                  )\n                ))}\n              </ul>\n            </div>\n          )}\n        </div>\n        <div className=\"btn-group-custom d-flex justify-content-end gap-2 mb-3 mt-5\">\n          <button\n            type=\"button\"\n            className={`btn ${styles.btnCancel}`}\n            onClick={() => navigate('/main')}\n          >\n            취소\n          </button>\n          {!isEdit ? (\n            <button\n              type=\"submit\"\n              className={`btn ${styles.btnReg}`}\n              disabled={loading}\n            >\n              {loading ? \"저장 중...\" : \"등록\"}\n            </button>\n          ) : (\n            <>\n              <button\n                type=\"submit\"\n                className={`btn ${styles.btnMod}`}\n                disabled={loading}\n              >\n                {loading ? \"저장 중...\" : \"변경\"}\n              </button>\n              <button\n                type=\"button\"\n                className={`btn btn-danger ${styles.btnDel}`}\n                onClick={handleDelete}\n                disabled={loading}\n              >\n                {loading ? \"삭제 중...\" : \"삭제\"}\n              </button>\n            </>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default BoardWrite;"],"names":["BoardWrite","state","useLocation","navigate","useNavigate","user","useStore","isEdit","existingFiles","useEffect","fileUtils","initialExistingFilesState","file","initialFileInputs","title","setTitle","useState","_a","content","setContent","_b","fileInputs","setFileInputs","files","setFiles","existingFilesState","setExistingFilesState","loading","setLoading","hasPermission","handleAddFileInput","handleRemoveFileInput","id","index","input","newFileInputs","newFiles","_","i","handleRemoveExistingFile","errorMsgPopup","payload","deleteResponse","fetchData","f","error","handleFileChange","e","selectedFile","handleSubmit","originalTitle","originalContent","gubun","noticeId","saveResponse","updatedNoticeId","_c","validFiles","formData","uploadResponse","fetchFileUpload","msgPopup","handleDelete","jsxs","jsx","styles","Fragment"],"mappings":"gRAUA,MAAMA,GAAa,IAAM,SACvB,KAAM,CAAE,MAAAC,CAAA,EAAUC,EAAA,EACZC,EAAWC,EAAA,EACX,CAAE,KAAAC,CAAA,EAASC,EAAA,EACXC,EAAS,CAAC,EAACN,GAAA,MAAAA,EAAO,QAClBO,GAAgBP,GAAA,YAAAA,EAAO,QAAS,CAAA,EAEtCQ,EAAAA,UAAU,KACRC,EAAU,UAAU,GAAG,EAChB,IAAM,CACXA,EAAU,UAAA,CAAU,GAErB,EAAE,EAEL,MAAMC,EAA4BH,EAAc,IAAII,IAAS,CAC3D,GAAGA,EACH,KAAMA,EAAK,UAAY,EACvB,QAASF,EAAU,YAAYE,CAAI,CAAA,EACnC,EACIC,EAAoBF,EAA0B,QAAUD,EAAU,cAAgB,CAAA,EAAK,CAAC,CAAE,GAAI,KAAK,IAAA,EAAO,EAC1G,CAACI,EAAOC,CAAQ,EAAIC,EAAAA,WAASC,EAAAhB,GAAA,YAAAA,EAAO,SAAP,YAAAgB,EAAe,QAAS,EAAE,EACvD,CAACC,EAASC,CAAU,EAAIH,EAAAA,WAASI,EAAAnB,GAAA,YAAAA,EAAO,SAAP,YAAAmB,EAAe,UAAW,EAAE,EAC7D,CAACC,EAAYC,CAAa,EAAIN,EAAAA,SAASH,CAAiB,EACxD,CAACU,EAAOC,CAAQ,EAAIR,WAAS,IAAI,MAAMH,EAAkB,MAAM,EAAE,KAAK,IAAI,CAAC,EAC3E,CAACY,EAAoBC,CAAqB,EAAIV,EAAAA,SAASL,CAAyB,EAChF,CAACgB,EAASC,CAAU,EAAIZ,EAAAA,SAAS,EAAK,EAE5CP,EAAAA,UAAU,IAAM,CACd,GAAI,CAACJ,GAAQ,CAACwB,EAAcxB,EAAK,KAAM,WAAW,EAAG,CACnDF,EAAS,GAAG,EACZ,MAAA,CACF,EACC,CAACE,EAAMF,CAAQ,CAAC,EAEnB,MAAM2B,EAAqB,IAAM,CACZL,EAAmB,OAASJ,EAAW,OACzCX,EAAU,gBACzBY,EAAc,CAAC,GAAGD,EAAY,CAAE,GAAI,KAAK,IAAA,CAAI,CAAG,CAAC,EACjDG,EAAS,CAAC,GAAGD,EAAO,IAAI,CAAC,EAC3B,EAGIQ,EAAyBC,GAAO,CACpC,MAAMC,EAAQZ,EAAW,UAAUa,GAASA,EAAM,KAAOF,CAAE,EAC3D,GAAIC,IAAU,GAEd,IAAIZ,EAAW,OAAS,EAAG,CACzB,MAAMc,EAAgBd,EAAW,OAAOa,GAASA,EAAM,KAAOF,CAAE,EAC1DI,EAAWb,EAAM,OAAO,CAACc,EAAGC,IAAMA,IAAML,CAAK,EACnDX,EAAca,CAAa,EAC3BX,EAASY,CAAQ,EACjB,MAAA,CAGFd,EAAc,CAAC,CAAE,GAAI,KAAK,MAAQ,CAAA,CAAG,CAAC,EACtCE,EAAS,CAAC,IAAI,CAAC,EAAA,EAGXe,EAA2B,MAAO3B,GAAS,OAC/C,GAAK,OAAO,QAAQ,eAAe,EAEnC,IAAI,CAACL,GAAU,GAACU,EAAAhB,GAAA,YAAAA,EAAO,SAAP,MAAAgB,EAAe,IAAI,CACjCuB,EAAc,4CAA4C,EAC1D,MAAA,CAGF,GAAI,CACF,MAAMC,EAAU,CACd,MAAO,IACP,OAAQ,OAAO7B,EAAK,MAAM,EAC1B,SAAU,OAAOX,EAAM,OAAO,EAAE,CAAA,EAG5ByC,EAAiB,MAAMC,EAAU,oBAAqBF,CAAO,EAEnE,GAAIC,EAAe,QAAU,KAC3B,MAAM,IAAI,MAAMA,EAAe,QAAU,UAAU,EAGrDhB,EAAsBD,EAAmB,OAAOmB,GAAKA,EAAE,SAAWhC,EAAK,MAAM,CAAC,EAE3Da,EAAmB,OAAS,EAAIJ,EAAW,OAC7CX,EAAU,YAAA,GAAiBW,EAAW,SAAW,IAChEC,EAAc,CAAC,CAAE,GAAI,KAAK,IAAA,CAAI,CAAG,CAAC,EAClCE,EAAS,CAAC,IAAI,CAAC,EACjB,OACOqB,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CL,EAAcK,EAAM,SAAW,qBAAqB,CAAA,EACtD,EAGIC,EAAmB,CAACd,EAAIe,IAAM,CAClC,MAAMC,EAAeD,EAAE,OAAO,MAAM,CAAC,EACrC,GAAIC,EAAc,CAChB,GAAIA,EAAa,KAAOtC,EAAU,eAAA,EAAkB,CAClD8B,EAAc,UAAU9B,EAAU,eAAeA,EAAU,eAAA,CAAgB,CAAC,eAAe,EAC3F,MAAA,CAEF,GAAI,CAACA,EAAU,YAAYsC,CAAY,EAAG,CACxCR,EAAc,yDAAyD,EACvE,MAAA,CAEF,MAAMP,EAAQZ,EAAW,UAAUa,GAASA,EAAM,KAAOF,CAAE,EAC3D,GAAIC,IAAU,GAAI,OAElB,MAAMG,EAAW,CAAC,GAAGb,CAAK,EAC1Ba,EAASH,CAAK,EAAIe,EAClBxB,EAASY,CAAQ,CAAA,CACnB,EAGIa,EAAe,MAAO,GAAM,WAChC,EAAE,eAAA,EACF,MAAMC,IAAgBjC,EAAAhB,GAAA,YAAAA,EAAO,SAAP,YAAAgB,EAAe,QAAS,GACxCkC,IAAkB/B,EAAAnB,GAAA,YAAAA,EAAO,SAAP,YAAAmB,EAAe,UAAW,GAIlD,GAAK,CAACb,IAAW,CAACO,GAAS,CAACI,IAAcX,GAHlBO,IAAUoC,GAGqC,CAACpC,GAAWP,GAFzDW,IAAYiC,GAE4E,CAACjC,EAAU,CAC3HsB,EAAc,iBAAiB,EAC/B,MAAA,CAGFZ,EAAW,EAAI,EAEf,GAAI,CACF,MAAMwB,EAAQ7C,EAAS,IAAM,IACvB8C,EAAW9C,EAAS,OAAON,EAAM,OAAO,EAAE,EAAI,IAQ9CqD,EAAe,MAAMX,EAAU,cAPrB,CACd,MAAAS,EACA,SAAAC,EACA,MAAAvC,EACA,QAAAI,CAAA,CAGyD,EAE3D,GAAIoC,EAAa,QAAU,KACzB,MAAM,IAAI,MAAMA,EAAa,QAAU,YAAY,EAGrD,MAAMC,EAAkBhD,EAAS8C,GAAWG,EAAAF,EAAa,OAAb,YAAAE,EAAmB,SAEzDC,EAAalC,EAAM,OAAOX,GAAQA,GAAQ,IAAI,EACpD,GAAI6C,EAAW,OAAS,EAAG,CACzB,MAAMC,EAAW,IAAI,SACrBA,EAAS,OAAO,QAAS,GAAG,EAC5BA,EAAS,OAAO,SAAU,EAAE,EAC5BA,EAAS,OAAO,WAAYH,CAAe,EAE3CE,EAAW,QAAS7C,GAAS,CAC3B8C,EAAS,OAAO,QAAS9C,CAAI,CAAA,CAC9B,EAED,MAAM+C,EAAiB,MAAMC,GAAgB,kBAAmBF,CAAQ,EAExE,GAAIC,EAAe,QAAU,KAC3B,MAAM,IAAI,MAAMA,EAAe,QAAU,WAAW,CACtD,CAGFE,EAAStD,EAAS,uBAAyB,sBAAsB,EACjEJ,EAAS,OAAO,CAAA,OACT0C,EAAO,CACd,QAAQ,MAAM,cAAe,CAC3B,QAASA,EAAM,QACf,SAAUA,EAAM,SAAW,CACzB,OAAQA,EAAM,SAAS,OACvB,KAAMA,EAAM,SAAS,KACrB,QAASA,EAAM,SAAS,OAAA,EACtB,sBAAA,CACL,EAEDL,EAAcK,EAAM,SAAW,uBAAuB,CAAA,QACxD,CACEjB,EAAW,EAAK,CAAA,CAClB,EAGIkC,EAAe,SAAY,CAC/B,GAAK,OAAO,QAAQ,cAAc,EAElC,CAAAlC,EAAW,EAAI,EACf,GAAI,CAEF,MAAMa,EAAU,CACd,MAAO,IACP,SAHe,OAAOxC,EAAM,OAAO,EAAE,EAIrC,MAAOa,GAAS,GAChB,QAASI,GAAW,EAAA,EAGhBwB,EAAiB,MAAMC,EAAU,cAAeF,CAAO,EAC7D,GAAIC,EAAe,QAAU,KAC3B,MAAM,IAAI,MAAMA,EAAe,QAAU,YAAY,EAGvDmB,EAAS,sBAAsB,EAC/B1D,EAAS,OAAO,CAAA,OACT0C,EAAO,CACd,QAAQ,MAAM,cAAeA,CAAK,EAElCL,EAAcK,EAAM,SAAW,uBAAuB,CAAA,QACxD,CACEjB,EAAW,EAAK,CAAA,EAClB,EAGF,OACEmC,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAW,yCAAyCC,EAAO,UAAU,GACtE,SAAA1D,EAAS,QAAU,OAAA,CACtB,EACAyD,EAAAA,IAAC,MAAA,CAAI,UAAWC,EAAO,cAAA,CAAgB,EACvCF,EAAAA,KAAC,OAAA,CAAK,SAAUd,EACd,SAAA,CAAAc,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,KAAE,EAChCA,EAAAA,IAAC,QAAA,CACC,UAAW,gCAAgCC,EAAO,WAAW,GAC7D,MAAOnD,EACP,SAAW,GAAMC,EAAS,EAAE,OAAO,KAAK,EACxC,YAAY,YACZ,SAAQ,EAAA,CAAA,CACV,EACF,EACAgD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,KAAE,EAChCA,EAAAA,IAAC,WAAA,CACC,UAAW,gCAAgCC,EAAO,WAAW,GAC7D,KAAK,IACL,MAAO/C,EACP,SAAW,GAAMC,EAAW,EAAE,OAAO,KAAK,EAC1C,YAAY,YACZ,SAAQ,EAAA,CAAA,CACV,EACF,EACA4C,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,aAAa,SAAA,CAAA,QACvBA,EAAAA,KAAC,OAAA,CAAK,UAAU,aAAa,SAAA,CAAA,OAAKrD,EAAU,YAAA,EAAc,iBAAeA,EAAU,eAAeA,EAAU,gBAAgB,EAAE,4BAAA,CAAA,CAA0B,CAAA,EAC/J,EACCe,EAAmB,OAAS,GAC3BsC,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,UAAA,CAAQ,EACXvC,EAAmB,IAAKb,GACvBmD,EAAAA,KAAC,MAAA,CAAsB,UAAU,iCAC/B,SAAA,CAAAA,EAAAA,KAAC,OAAA,CAAK,UAAU,OACb,SAAA,CAAAnD,EAAK,SAAS,KAAGF,EAAU,eAAeE,EAAK,IAAI,EAAE,IACrD,CAACA,EAAK,eAAY,OAAA,CAAK,UAAU,mBAAmB,SAAA,aAAA,CAAW,CAAA,EAClE,EACAoD,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,gCACV,QAAS,IAAMzB,EAAyB3B,CAAI,EAC7C,SAAA,GAAA,CAAA,CAED,CAAA,EAXQA,EAAK,MAYf,CACD,CAAA,EACH,EAEDS,GAAcA,EAAW,OAAS,EACjCA,EAAW,IAAI,CAACa,EAAOD,IACrB8B,EAAAA,KAAC,MAAA,CAAmB,UAAU,iCAC5B,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,UAAW,gCAAgCC,EAAO,WAAW,QAC7D,SAAWlB,GAAMD,EAAiBZ,EAAM,GAAIa,CAAC,EAC7C,OAAQrC,EAAU,UAAA,CAAU,CAAA,EAE9BsD,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,8BACV,QAAS,IAAMjC,EAAsBG,EAAM,EAAE,EAC9C,SAAA,GAAA,CAAA,EAGAD,IAAUZ,EAAW,OAAS,GAC7B2C,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,0BACV,QAASlC,EACT,SAAUL,EAAmB,OAASJ,EAAW,QAAUX,EAAU,YAAA,EACtE,SAAA,GAAA,CAAA,CAED,CAAA,EAtBMwB,EAAM,EAwBhB,CACD,QAEA,MAAA,EAAI,EAENX,EAAM,KAAKX,GAAQA,GAAQ,IAAI,GAC9BmD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAA,SAAA,CAAO,EACXA,EAAAA,IAAC,MACE,SAAAzC,EAAM,IAAI,CAACX,EAAMqB,IAChBrB,GACEmD,EAAAA,KAAC,KAAA,CACE,SAAA,CAAAnD,EAAK,KAAK,KAAGF,EAAU,eAAeE,EAAK,IAAI,EAAE,GAAA,CAAA,EAD3CqB,CAET,CAEH,CAAA,CACH,CAAA,CAAA,CACF,CAAA,EAEJ,EACA8B,EAAAA,KAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAW,OAAOC,EAAO,SAAS,GAClC,QAAS,IAAM9D,EAAS,OAAO,EAChC,SAAA,IAAA,CAAA,EAGCI,EASAwD,EAAAA,KAAAG,WAAA,CACE,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAW,OAAOC,EAAO,MAAM,GAC/B,SAAUtC,EAET,WAAU,UAAY,IAAA,CAAA,EAEzBqC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAW,kBAAkBC,EAAO,MAAM,GAC1C,QAASH,EACT,SAAUnC,EAET,WAAU,UAAY,IAAA,CAAA,CACzB,CAAA,CACF,EAxBAqC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAW,OAAOC,EAAO,MAAM,GAC/B,SAAUtC,EAET,WAAU,UAAY,IAAA,CAAA,CAmBzB,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}