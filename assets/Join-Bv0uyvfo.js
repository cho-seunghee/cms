import{r as l,u as G,j as e,f as S,e as d}from"./index-CDzJiYq6.js";import{m as V}from"./msgPopup-vJapftwn.js";import{e as b}from"./errorMsgPopup-BRg64j45.js";import{s}from"./Join.module-BsAA2Jbn.js";const I=({show:x,onHide:N})=>{const[u,j]=l.useState(""),[p,v]=l.useState(""),[o,g]=l.useState(""),[f,E]=l.useState(""),[m,w]=l.useState(""),[t,P]=l.useState(""),[i,R]=l.useState(""),M=G();l.useEffect(()=>{x&&(j(""),v(""),g(""),E(""),w(""),P(""),R(""))},[x]);const C=()=>{if(!u||!p||!o||!f||!t||!i)return"필수 입력 항목을 모두 채워주세요.";const a=d.validateVarcharLength(u,20,"아이디");if(!a.valid)return a.error;const n=d.validateVarcharLength(p,50,"이름");if(!n.valid)return n.error;const h=d.validateVarcharLength(m,20,"전화번호");if(!h.valid)return h.error;const r=d.validateVarcharLength(t,20,"핸드폰번호");if(!r.valid)return r.error;const c=d.validateVarcharLength(i,50,"이메일");if(!c.valid)return c.error;if(o.length<6)return"비밀번호는 최소 6자 이상이어야 합니다.";if(o!==f)return"비밀번호와 비밀번호 확인이 일치하지 않습니다.";if(i&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return"유효한 이메일 형식이 아닙니다.";const y=/^(\d{2,3})-(\d{3,4})-(\d{3,4})$/;return m&&!y.test(m)?"전화번호 형식이 올바르지 않습니다. (예: 02-1234-5678, 031-7777-7777)":t&&!y.test(t)?"핸드폰번호 형식이 올바르지 않습니다. (예: 010-1234-5678, 010-7777-7777)":""},k=async a=>{a.preventDefault();const n=C();if(n){b(n);return}const h={pGUBUN:"I",pEMPNO:u,pEMPNM:p,pEMPPWD:o,pPHONE:m||"",pMOBILE:t,pEMAIL:i};try{const r=await S("auth/join/save",h);if(r.success)if(r.errMsg!==""||r.data[0].ERRCD!=="00"){let c=r.errMsg;r.data[0].ERRMSG!==""&&(c=r.data[0].ERRMSG),b(c)}else V("가입되었습니다."),M("/login"),N();else throw new Error(r.errMsg||"가입정보가 잘못되었습니다.")}catch(r){console.error("Registration error:",r),b(r.message||"가입 중 오류가 발생했습니다. 다시 시도해주세요.")}};return x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.overlay,onClick:N}),e.jsx("div",{className:`${s.modal} show d-block`,tabIndex:"-1",children:e.jsx("div",{className:`${s.modalDialog} modal-dialog-centered`,children:e.jsxs("div",{className:`${s.modalContent} modal-content`,children:[e.jsxs("div",{className:`${s.modalHeader} modal-header`,children:[e.jsx("h5",{className:`${s.modalTitle} modal-title`,children:"회원 가입"}),e.jsx("button",{type:"button",className:`${s.btnClose} btn-close`,onClick:N})]}),e.jsx("div",{className:`${s.modalBody} modal-body`,children:e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"empNo",className:"form-label",children:[e.jsx("i",{className:"bi bi-person me-2"}),"아이디 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empNo",value:u,onChange:a=>j(a.target.value),required:!0,placeholder:"아이디를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"empNm",className:"form-label",children:[e.jsx("i",{className:"bi bi-person-fill me-2"}),"이름 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empNm",value:p,onChange:a=>v(a.target.value),required:!0,placeholder:"이름을 입력하세요"})]})]}),e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"empPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock me-2"}),"비밀번호 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"empPwd",value:o,onChange:a=>g(a.target.value),required:!0,placeholder:"비밀번호를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"confirmPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock-fill me-2"}),"비밀번호 확인 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"confirmPwd",value:f,onChange:a=>E(a.target.value),required:!0,placeholder:"비밀번호를 입력하세요"})]})]}),e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"phone",className:"form-label",children:[e.jsx("i",{className:"bi bi-telephone me-2"}),"전화번호"]}),e.jsx("input",{type:"tel",className:"form-control",id:"phone",value:m,onChange:a=>w(a.target.value),placeholder:"(예: 02-1234-5678)"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"mobile",className:"form-label",children:[e.jsx("i",{className:"bi bi-phone me-2"}),"핸드폰번호 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"tel",className:"form-control",id:"mobile",value:t,onChange:a=>P(a.target.value),required:!0,placeholder:"(예: 010-1234-5678)"})]})]}),e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"email",className:"form-label",children:[e.jsx("i",{className:"bi bi-envelope me-2"}),"이메일 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"email",className:"form-control",id:"email",value:i,onChange:a=>R(a.target.value),required:!0,placeholder:"이메일을 입력하세요"})]}),e.jsx("div",{className:s.formGroup})]}),e.jsxs("button",{type:"submit",className:`${s.btn} w-100 mt-3`,children:[e.jsx("i",{className:"bi bi-person-plus me-2"}),"가입"]})]})})]})})})]}):null};export{I as default};
//# sourceMappingURL=Join-Bv0uyvfo.js.map
