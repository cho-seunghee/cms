{"version":3,"file":"LicensePopup-D_rnkcZ4.js","sources":["../../src/service/login.js","../../src/components/popup/LicensePopup.jsx"],"sourcesContent":["import { fetchData } from '../utils/dataUtils';\nimport useStore from '../store/store';\n\nexport const performLogin = async (gubun, empNo, empPwd, navigate, setError) => {\n  try {\n    const response = await fetchData('auth/login', { empNo, empPwd });\n    \n    if (!response.success) {\n      throw new Error(response.errMsg || '아이디 또는 비밀번호가 잘못되었습니다.');\n    } else {\n      if (response.errMsg !== '') {\n        setError(response.errMsg);\n      } else {\n        if (response.data.user.pwdChgYn === 'Y') {\n          return response;\n        }\n\n        const { setUser } = useStore.getState();\n        setUser({\n          ...response.data.user,\n          expiresAt: response.data.expiresAt * 1000,\n        });\n\n        if (gubun === 'web') navigate('/main', { replace: true });\n        else navigate('/mobile/main', { replace: true });\n      }\n    }\n  } catch (error) {\n    console.error('Login error:', error.message);\n    setError(error.message || '로그인에 실패했습니다. 다시 시도해주세요.');\n  }\n  return null;\n};","import React, { useState, useEffect } from \"react\";\nimport CommonPopup from \"./CommonPopup\";\nimport styles from \"./LicensePopup.module.css\";\nimport { fetchJsonData, fetchDataGet } from \"../../utils/dataUtils\";\nimport license from '../../data/license.json';\n\nconst LicensePopup = ({ show, onHide }) => {\n  const [licenseData, setLicenseData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loadLicenseData = async () => {\n      try {\n        // Fetch client-side license data\n        const clientResult = await fetchJsonData(license);\n        const clientDataArray = Array.isArray(clientResult) ? clientResult : [clientResult];\n\n        // Fetch server-side license data\n        const serverResponse = await fetchDataGet(\"public/licenses/info\");\n        if (!serverResponse.success && serverResponse.errMsg) {\n          console.error(serverResponse.errMsg);\n          throw new Error(serverResponse.errMsg || \"Server license data fetch failed\");\n        }\n        const serverDataArray = Array.isArray(serverResponse.data) ? serverResponse.data : [];\n\n        // Normalize and combine data\n        const normalizedClientData = clientDataArray.map(item => ({\n          name: item.name,\n          license: item.license,\n          copyright: item.copyright,\n          repository: item.repository\n        }));\n\n        const normalizedServerData = serverDataArray.map(item => ({\n          name: item.library,\n          license: item.license,\n          copyright: item.copyright,\n          repository: item.url\n        }));\n\n        // Combine and sort by name\n        const combinedData = [...normalizedClientData, ...normalizedServerData].sort((a, b) =>\n          a.name.localeCompare(b.name)\n        );\n\n        setLicenseData(combinedData);\n      } catch (err) {\n        setLicenseData([]);\n        setError(\"데이터 로드 실패: \" + err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (show) {\n      loadLicenseData();\n    }\n  }, [show]);\n\n  return (\n    <CommonPopup\n      show={show}\n      onHide={onHide}\n      title=\"License Information\"\n      buttons={[\n        {\n          label: \"Close\",\n          className: `${styles.btn} ${styles.btnSecondary} btn btn-secondary`,\n          action: onHide,\n        },\n      ]}\n    >\n      <div className={styles.licenseContent}>\n        {loading && <p>Loading...</p>}\n        {error && <p className=\"text-danger\">{error}</p>}\n        {!loading && !error && (\n          <>\n            <h5>Software License Information</h5>\n            <p>This application uses the following open-source libraries:</p>\n            <ul>\n              {licenseData.map((item, index) => (\n                <li key={index}>\n                  {item.name} - {item.license}\n                  <br />\n                  Copyright (c) {item.copyright}\n                  <br />\n                  <a\n                    href={item.repository}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {item.name} Repository\n                  </a>\n                </li>\n              ))}\n            </ul>\n            <p>\n              This application adheres to all provided open-source license terms.\n              For detailed license information, please refer to the respective\n              documentation of each library.\n            </p>\n          </>\n        )}\n      </div>\n    </CommonPopup>\n  );\n};\n\nexport default LicensePopup;"],"names":["performLogin","gubun","empNo","empPwd","navigate","setError","response","fetchData","setUser","useStore","error","LicensePopup","show","onHide","licenseData","setLicenseData","useState","loading","setLoading","useEffect","clientResult","fetchJsonData","license","clientDataArray","serverResponse","fetchDataGet","serverDataArray","normalizedClientData","item","normalizedServerData","combinedData","a","b","err","jsx","CommonPopup","styles","jsxs","Fragment","index"],"mappings":"yHAGY,MAACA,EAAe,MAAOC,EAAOC,EAAOC,EAAQC,EAAUC,IAAa,CAC9E,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAU,aAAc,CAAE,MAAAL,EAAO,OAAAC,EAAQ,EAEhE,GAAKG,EAAS,QAGZ,GAAIA,EAAS,SAAW,GACtBD,EAASC,EAAS,MAAM,MACnB,CACL,GAAIA,EAAS,KAAK,KAAK,WAAa,IAClC,OAAOA,EAGT,KAAM,CAAE,QAAAE,CAAO,EAAKC,EAAS,SAAQ,EACrCD,EAAQ,CACN,GAAGF,EAAS,KAAK,KACjB,UAAWA,EAAS,KAAK,UAAY,GAC/C,CAAS,EAEGL,IAAU,MAAOG,EAAS,QAAS,CAAE,QAAS,GAAM,EACnDA,EAAS,eAAgB,CAAE,QAAS,EAAI,CAAE,CACvD,KAjBM,OAAM,IAAI,MAAME,EAAS,QAAU,uBAAuB,CAmBhE,OAAWI,EAAO,CACd,QAAQ,MAAM,eAAgBA,EAAM,OAAO,EAC3CL,EAASK,EAAM,SAAW,yBAAyB,CACvD,CACE,OAAO,IACT,4nDC1BMC,EAAe,CAAC,CAAE,KAAAC,EAAM,OAAAC,KAAa,CACzC,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,CAAA,CAAE,EAC3C,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACN,EAAOL,CAAQ,EAAIW,EAAAA,SAAS,IAAI,EAEvCG,OAAAA,EAAAA,UAAU,IAAM,CA4CVP,IA3CoB,SAAY,CAClC,GAAI,CAEF,MAAMQ,EAAe,MAAMC,EAAcC,CAAO,EAC1CC,EAAkB,MAAM,QAAQH,CAAY,EAAIA,EAAe,CAACA,CAAY,EAG5EI,EAAiB,MAAMC,EAAa,sBAAsB,EAChE,GAAI,CAACD,EAAe,SAAWA,EAAe,OAC5C,cAAQ,MAAMA,EAAe,MAAM,EAC7B,IAAI,MAAMA,EAAe,QAAU,kCAAkC,EAE7E,MAAME,EAAkB,MAAM,QAAQF,EAAe,IAAI,EAAIA,EAAe,KAAO,CAAA,EAG7EG,EAAuBJ,EAAgB,IAAIK,IAAS,CACxD,KAAMA,EAAK,KACX,QAASA,EAAK,QACd,UAAWA,EAAK,UAChB,WAAYA,EAAK,UAAA,EACjB,EAEIC,EAAuBH,EAAgB,IAAIE,IAAS,CACxD,KAAMA,EAAK,QACX,QAASA,EAAK,QACd,UAAWA,EAAK,UAChB,WAAYA,EAAK,GAAA,EACjB,EAGIE,EAAe,CAAC,GAAGH,EAAsB,GAAGE,CAAoB,EAAE,KAAK,CAACE,EAAGC,IAC/ED,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAA,EAG7BjB,EAAee,CAAY,CAAA,OACpBG,EAAK,CACZlB,EAAe,CAAA,CAAE,EACjBV,EAAS,cAAgB4B,EAAI,OAAO,CAAA,QACtC,CACEf,EAAW,EAAK,CAAA,CAClB,GAIA,CACF,EACC,CAACN,CAAI,CAAC,EAGPsB,EAAAA,IAACC,EAAA,CACC,KAAAvB,EACA,OAAAC,EACA,MAAM,sBACN,QAAS,CACP,CACE,MAAO,QACP,UAAW,GAAGuB,EAAO,GAAG,IAAIA,EAAO,YAAY,qBAC/C,OAAQvB,CAAA,CACV,EAGF,SAAAwB,EAAAA,KAAC,MAAA,CAAI,UAAWD,EAAO,eACpB,SAAA,CAAAnB,GAAWiB,EAAAA,IAAC,KAAE,SAAA,YAAA,CAAU,EACxBxB,GAASwB,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAAxB,EAAM,EAC3C,CAACO,GAAW,CAACP,GACZ2B,EAAAA,KAAAC,EAAAA,SAAA,CACE,SAAA,CAAAJ,EAAAA,IAAC,MAAG,SAAA,8BAAA,CAA4B,EAChCA,EAAAA,IAAC,KAAE,SAAA,4DAAA,CAA0D,EAC7DA,EAAAA,IAAC,MACE,SAAApB,EAAY,IAAI,CAACc,EAAMW,WACrB,KAAA,CACE,SAAA,CAAAX,EAAK,KAAK,MAAIA,EAAK,cACnB,KAAA,EAAG,EAAE,iBACSA,EAAK,gBACnB,KAAA,EAAG,EACJS,EAAAA,KAAC,IAAA,CACC,KAAMT,EAAK,WACX,OAAO,SACP,IAAI,sBAEH,SAAA,CAAAA,EAAK,KAAK,aAAA,CAAA,CAAA,CACb,GAXOW,CAYT,CACD,EACH,EACAL,EAAAA,IAAC,KAAE,SAAA,qKAAA,CAIH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CAGN"}