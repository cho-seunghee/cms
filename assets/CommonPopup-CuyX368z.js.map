{"version":3,"file":"CommonPopup-CuyX368z.js","sources":["../../src/components/popup/CommonPopup.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styles from \"./CommonPopup.module.css\";\n\nconst CommonPopup = ({\n  show,\n  onHide,\n  onConfirm,\n  title,\n  children,\n  buttons = [],\n  requiresConfirm = false,\n  confirmMessage = \"\",\n}) => {\n  const [toastMessage, setToastMessage] = useState(\"\");\n  const [showToast, setShowToast] = useState(false);\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\n  const [pendingAction, setPendingAction] = useState(null);\n\n  useEffect(() => {\n    if (showToast) {\n      const timer = setTimeout(() => {\n        setShowToast(false);\n        setToastMessage(\"\");\n      }, 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [showToast]);\n\n  useEffect(() => {\n    // Reset states when the popup is hidden\n    if (!show) {\n      setShowConfirmDialog(false);\n      setPendingAction(null);\n      setShowToast(false);\n      setToastMessage(\"\");\n    }\n  }, [show]);\n\n  const handleConfirm = async (action) => {\n    try {\n      const { result, onSuccess } = await action();\n      if (result && result.error) {\n        setToastMessage(result.error);\n        setShowToast(true);\n      } else if (result && result.success) {\n        setToastMessage(result.success);\n        setShowToast(true);\n        return { onSuccess };\n      }\n    } catch (error) {\n      setToastMessage(\"오류가 발생했습니다: \" + error.message);\n      setShowToast(true);\n    }\n    return {};\n  };\n\n  const handleButtonClick = (action) => {\n    if (action === onHide) {\n      // Directly call onHide without confirmation\n      onHide();\n    } else if (requiresConfirm) {\n      // Show confirmation dialog for other actions\n      setPendingAction(() => action);\n      setShowConfirmDialog(true);\n    } else {\n      // Execute action directly if no confirmation is required\n      handleConfirm(action);\n    }\n  };\n\n  const handleConfirmDialogConfirm = () => {\n    if (pendingAction) {\n      handleConfirm(pendingAction);\n    }\n    setShowConfirmDialog(false);\n    setPendingAction(null);\n  };\n\n  const handleConfirmDialogCancel = () => {\n    setShowConfirmDialog(false);\n    setPendingAction(null);\n  };\n\n  if (!show) return null;\n\n  const defaultButtons = [\n  { label: \"취소\", className: `${styles.btn} ${styles.btnSecondary} btn btn-secondary`, action: onHide },\n  { label: \"확인\", className: `${styles.btn} ${styles.btnPrimary} btn text-bg-success`, action: onConfirm },\n  ];\n\n  const activeButtons = buttons.length > 0 ? buttons.slice(0, 5) : defaultButtons;\n\n  return (\n    <>\n      <div className={styles.overlay} onClick={onHide}></div>\n      <div className={`${styles.modal} show d-block`} tabIndex=\"-1\">\n        <div className={`${styles.modalDialog} modal-dialog-centered`}>\n          <div className={`${styles.modalContent} modal-content`}>\n            <div className={`${styles.modalHeader} modal-header`}>\n              <h5 className={`${styles.modalTitle} modal-title`}>{title}</h5>\n              <button type=\"button\" className={`${styles.btnClose} btn-close`} onClick={onHide}></button>\n            </div>\n            <div className={`${styles.modalBody} modal-body`}>\n              {children}\n              {showToast && (\n                <div className={`${styles.toast} alert alert-danger`} role=\"alert\">\n                  {toastMessage}\n                </div>\n              )}\n            </div>\n            <div className={`${styles.modalFooter} modal-footer`}>\n              {activeButtons.map((btn, index) => (\n                <button\n                  key={index}\n                  type=\"button\"\n                  className={`${styles.margin1} ${btn.className}`}\n                  onClick={() => handleButtonClick(btn.action)}\n                >\n                  {btn.label}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n      <CommonPopup\n        show={showConfirmDialog}\n        onHide={handleConfirmDialogCancel}\n        title=\"확인\"\n        buttons={[\n          { label: \"취소\", className: `${styles.btn} ${styles.btnSecondary} btn btn-secondary`, action: handleConfirmDialogCancel },\n          { label: \"확인\", className: `${styles.btn} ${styles.btnPrimary} btn text-bg-success`, action: handleConfirmDialogConfirm },\n        ]}\n      >\n        <p>{confirmMessage || \"이 작업을 진행하시겠습니까?\"}</p>\n      </CommonPopup>\n    </>\n  );\n};\n\nexport default CommonPopup;"],"names":["CommonPopup","show","onHide","onConfirm","title","children","buttons","requiresConfirm","confirmMessage","toastMessage","setToastMessage","useState","showToast","setShowToast","showConfirmDialog","setShowConfirmDialog","pendingAction","setPendingAction","useEffect","timer","handleConfirm","action","result","onSuccess","error","handleButtonClick","handleConfirmDialogConfirm","handleConfirmDialogCancel","defaultButtons","styles","activeButtons","jsxs","Fragment","jsx","btn","index"],"mappings":"uiBAGMA,EAAc,CAAC,CACnB,KAAAC,EACA,OAAAC,EACA,UAAAC,EACA,MAAAC,EACA,SAAAC,EACA,QAAAC,EAAU,CAAA,EACV,gBAAAC,EAAkB,GAClB,eAAAC,EAAiB,EACnB,IAAM,CACJ,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAAA,SAAS,EAAE,EAC7C,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAC1C,CAACG,EAAmBC,CAAoB,EAAIJ,EAAAA,SAAS,EAAK,EAC1D,CAACK,EAAeC,CAAgB,EAAIN,EAAAA,SAAS,IAAI,EAEvDO,EAAAA,UAAU,IAAM,CACd,GAAIN,EAAW,CACb,MAAMO,EAAQ,WAAW,IAAM,CAC7BN,EAAa,EAAK,EAClBH,EAAgB,EAAE,CAAA,EACjB,GAAI,EACP,MAAO,IAAM,aAAaS,CAAK,CAAA,CACjC,EACC,CAACP,CAAS,CAAC,EAEdM,EAAAA,UAAU,IAAM,CAETjB,IACHc,EAAqB,EAAK,EAC1BE,EAAiB,IAAI,EACrBJ,EAAa,EAAK,EAClBH,EAAgB,EAAE,EACpB,EACC,CAACT,CAAI,CAAC,EAET,MAAMmB,EAAgB,MAAOC,GAAW,CACtC,GAAI,CACF,KAAM,CAAE,OAAAC,EAAQ,UAAAC,CAAA,EAAc,MAAMF,EAAA,EACpC,GAAIC,GAAUA,EAAO,MACnBZ,EAAgBY,EAAO,KAAK,EAC5BT,EAAa,EAAI,UACRS,GAAUA,EAAO,QAC1B,OAAAZ,EAAgBY,EAAO,OAAO,EAC9BT,EAAa,EAAI,EACV,CAAE,UAAAU,CAAA,CACX,OACOC,EAAO,CACdd,EAAgB,eAAiBc,EAAM,OAAO,EAC9CX,EAAa,EAAI,CAAA,CAEnB,MAAO,CAAA,CAAC,EAGJY,EAAqBJ,GAAW,CAChCA,IAAWnB,EAEbA,EAAA,EACSK,GAETU,EAAiB,IAAMI,CAAM,EAC7BN,EAAqB,EAAI,GAGzBK,EAAcC,CAAM,CACtB,EAGIK,EAA6B,IAAM,CACnCV,GACFI,EAAcJ,CAAa,EAE7BD,EAAqB,EAAK,EAC1BE,EAAiB,IAAI,CAAA,EAGjBU,EAA4B,IAAM,CACtCZ,EAAqB,EAAK,EAC1BE,EAAiB,IAAI,CAAA,EAGvB,GAAI,CAAChB,EAAM,OAAO,KAElB,MAAM2B,EAAiB,CACvB,CAAE,MAAO,KAAM,UAAW,GAAGC,EAAO,GAAG,IAAIA,EAAO,YAAY,qBAAsB,OAAQ3B,CAAA,EAC5F,CAAE,MAAO,KAAM,UAAW,GAAG2B,EAAO,GAAG,IAAIA,EAAO,UAAU,uBAAwB,OAAQ1B,CAAA,CAAU,EAGhG2B,EAAgBxB,EAAQ,OAAS,EAAIA,EAAQ,MAAM,EAAG,CAAC,EAAIsB,EAEjE,OACEG,EAAAA,KAAAC,WAAA,CACE,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAWJ,EAAO,QAAS,QAAS3B,EAAQ,EACjD+B,EAAAA,IAAC,OAAI,UAAW,GAAGJ,EAAO,KAAK,gBAAiB,SAAS,KACvD,SAAAI,EAAAA,IAAC,MAAA,CAAI,UAAW,GAAGJ,EAAO,WAAW,yBACnC,SAAAE,EAAAA,KAAC,OAAI,UAAW,GAAGF,EAAO,YAAY,iBACpC,SAAA,CAAAE,OAAC,MAAA,CAAI,UAAW,GAAGF,EAAO,WAAW,gBACnC,SAAA,CAAAI,EAAAA,IAAC,MAAG,UAAW,GAAGJ,EAAO,UAAU,eAAiB,SAAAzB,EAAM,EAC1D6B,EAAAA,IAAC,SAAA,CAAO,KAAK,SAAS,UAAW,GAAGJ,EAAO,QAAQ,aAAc,QAAS3B,CAAA,CAAQ,CAAA,EACpF,SACC,MAAA,CAAI,UAAW,GAAG2B,EAAO,SAAS,cAChC,SAAA,CAAAxB,EACAO,GACCqB,EAAAA,IAAC,MAAA,CAAI,UAAW,GAAGJ,EAAO,KAAK,sBAAuB,KAAK,QACxD,SAAApB,CAAA,CACH,CAAA,EAEJ,EACAwB,EAAAA,IAAC,MAAA,CAAI,UAAW,GAAGJ,EAAO,WAAW,gBAClC,SAAAC,EAAc,IAAI,CAACI,EAAKC,IACvBF,EAAAA,IAAC,SAAA,CAEC,KAAK,SACL,UAAW,GAAGJ,EAAO,OAAO,IAAIK,EAAI,SAAS,GAC7C,QAAS,IAAMT,EAAkBS,EAAI,MAAM,EAE1C,SAAAA,EAAI,KAAA,EALAC,CAAA,CAOR,CAAA,CACH,CAAA,CAAA,CACF,EACF,EACF,EACAF,EAAAA,IAACjC,EAAA,CACC,KAAMc,EACN,OAAQa,EACR,MAAM,KACN,QAAS,CACP,CAAE,MAAO,KAAM,UAAW,GAAGE,EAAO,GAAG,IAAIA,EAAO,YAAY,qBAAsB,OAAQF,CAAA,EAC5F,CAAE,MAAO,KAAM,UAAW,GAAGE,EAAO,GAAG,IAAIA,EAAO,UAAU,uBAAwB,OAAQH,CAAA,CAA2B,EAGzH,SAAAO,EAAAA,IAAC,IAAA,CAAG,SAAAzB,GAAkB,iBAAA,CAAkB,CAAA,CAAA,CAC1C,EACF,CAEJ"}